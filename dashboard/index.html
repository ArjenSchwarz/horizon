<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Horizon - Personal time tracking for AI coding sessions">
  <title>Horizon</title>

  <!-- Icons -->
  <link rel="icon" type="image/png" href="horizon-32.png">
  <link rel="apple-touch-icon" href="horizon-180.png">
  <link rel="manifest" href="manifest.json">

  <!-- Fonts: IBM Plex Mono and Outfit -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <div class="logo">
        <img src="horizon-icon.webp" alt="Horizon" class="logo-icon">
        <span class="logo-text">Horizon</span>
      </div>
    </div>
    <div class="header-right">
      <div class="sync-status" id="sync-status">
        <span class="sync-dot"></span>
        <span class="sync-text">--</span>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <!-- API Key Setup (shown when no API key) -->
    <section class="api-key-setup" id="api-key-setup" hidden>
      <div class="setup-card">
        <h2>Connect to Horizon</h2>
        <p>Enter your API key to start viewing your coding sessions.</p>
        <form id="api-key-form">
          <input
            type="password"
            id="api-key-input"
            placeholder="Enter API key"
            autocomplete="off"
            required
          >
          <button type="submit" class="btn-primary">Connect</button>
        </form>
        <p class="setup-error" id="setup-error" hidden></p>
      </div>
    </section>

    <!-- Dashboard Content (shown when API key is set) -->
    <div class="dashboard" id="dashboard" hidden>
      <!-- Stats Cards Row -->
      <section class="stats-cards" aria-label="Statistics overview">
        <!-- This Week -->
        <div class="stat-card">
          <div class="stat-label">This Week</div>
          <div class="stat-value" id="stat-this-week">--</div>
        </div>

        <!-- Today -->
        <div class="stat-card">
          <div class="stat-label">Today</div>
          <div class="stat-value" id="stat-today-hours">--</div>
          <div class="stat-secondary" id="stat-today-sessions">-- sessions</div>
        </div>

        <!-- Top Agent -->
        <div class="stat-card">
          <div class="stat-label">Top Agent</div>
          <div class="stat-value" id="stat-top-agent">--</div>
          <div class="stat-secondary" id="stat-top-agent-hours">-- hrs</div>
        </div>

        <!-- Top Project -->
        <div class="stat-card">
          <div class="stat-label">Top Project</div>
          <div class="stat-value" id="stat-top-project">--</div>
          <div class="stat-secondary" id="stat-top-project-hours">-- hrs</div>
        </div>
      </section>

      <!-- Weekly Activity Panel -->
      <section class="panel weekly-activity" aria-label="Weekly activity">
        <div class="panel-header">
          <h2 class="panel-title">Weekly Activity</h2>
          <div class="week-nav" id="week-nav">
            <button class="week-nav-btn" id="week-prev" aria-label="Previous week">&lt;</button>
            <span class="week-label" id="week-label">--</span>
            <button class="week-nav-btn" id="week-next" aria-label="Next week">&gt;</button>
            <button class="week-nav-btn week-today-btn" id="week-today" hidden>Today</button>
          </div>
        </div>
        <div class="weekly-chart" id="weekly-chart">
          <!-- Rendered by JavaScript -->
        </div>
      </section>

      <!-- Projects and Devices Row -->
      <section class="projects-row">
        <!-- Projects Panel -->
        <div class="panel projects-panel">
          <h2 class="panel-title">Projects</h2>
          <div class="projects-list" id="projects-list">
            <!-- Rendered by JavaScript -->
          </div>
        </div>

        <!-- Devices Panel -->
        <div class="panel devices-panel">
          <h2 class="panel-title">Devices</h2>
          <div class="devices-chart" id="devices-chart">
            <!-- Rendered by JavaScript -->
          </div>
        </div>
      </section>

      <!-- Session Detail Panel -->
      <section class="panel session-detail" id="session-detail-panel" hidden>
        <h2 class="panel-title" id="session-detail-title">Sessions today</h2>
        <div class="sessions-list" id="sessions-list">
          <!-- Rendered by JavaScript -->
        </div>
      </section>

      <!-- Agents Row -->
      <section class="agents-row">
        <!-- Agents This Week Panel -->
        <div class="panel agents-panel">
          <h2 class="panel-title">Agents This Week</h2>
          <div class="agents-chart" id="agents-chart">
            <!-- Rendered by JavaScript -->
          </div>
        </div>

        <!-- Agent x Project Panel -->
        <div class="panel agent-project-panel">
          <h2 class="panel-title">Agent x Project</h2>
          <div class="agent-project-list" id="agent-project-list">
            <!-- Rendered by JavaScript -->
          </div>
        </div>
      </section>
    </div>

    <!-- Offline Indicator -->
    <div class="offline-indicator" id="offline-indicator" hidden>
      <span class="offline-icon">!</span>
      <span>Offline - showing cached data</span>
    </div>
  </main>

  <!-- Tooltip (for weekly activity bars) -->
  <div class="tooltip" id="tooltip" hidden>
    <div class="tooltip-content"></div>
  </div>

  <!-- Scripts -->
  <script src="config.js"></script>
  <script src="mock-data.js"></script>
  <script src="app.js"></script>
</body>
</html>
